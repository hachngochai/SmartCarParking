{"version":3,"sources":["parking.js"],"names":["grid","document","getElementById","customSelect","selected","querySelector","options","querySelectorAll","vehicleInfo","plateInfo","statusText","timerText","priceText","zoneSelector","freeCountEl","busyCountEl","vehicleImageEl","currentZone","activeSlot","timerInterval","detectedPlate","currentVehicle","pendingSlot","vehicleImages","car","motorbike","bike","forEach","opt","onclick","o","classList","remove","add","dataset","type","renderZoneButtons","innerHTML","Object","keys","zones","zoneKey","btn","createElement","className","textContent","name","renderSlots","appendChild","updateZoneInfo","slots","free","busy","s","occupied","slot","div","id","handleSlotClick","style","display","alert","existed","isVehicleAlreadyParked","zone","startTime","Date","now","vehicle","plate","src","startTimer","toggle","option","stopTimer","addEventListener","e","contains","target","clearInterval","setInterval","diff","Math","floor","min","String","padStart","sec","calculatePrice","openCamera","generatePlate","letters","nums","random","length","confirmPlate","showQRBill","data","modal","qrDiv","info","billText","time","price","QRCode","text","width","height","innerText","minutes","closeQR"],"mappings":"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","sourcesContent":["/* ===================== DOM ===================== */\nconst grid = document.getElementById(\"parkingGrid\");\nconst customSelect = document.getElementById(\"zoneSelect\");\nconst selected = customSelect.querySelector(\".selected\");\nconst options = customSelect.querySelectorAll(\".options li\");\n\nconst vehicleInfo = document.getElementById(\"vehicleInfo\");\nconst plateInfo = document.getElementById(\"plateInfo\");\nconst statusText = document.getElementById(\"status\");\nconst timerText = document.getElementById(\"timer\");\nconst priceText = document.getElementById(\"price\");\n\nconst zoneSelector = document.getElementById(\"zoneSelector\");\nconst freeCountEl = document.getElementById(\"freeCount\");\nconst busyCountEl = document.getElementById(\"busyCount\");\n\nconst vehicleImageEl = document.getElementById(\"vehicleImage\");\n\n/* ===================== STATE ===================== */\nlet currentZone = \"A\";\nlet activeSlot = null;\nlet timerInterval = null;\nlet detectedPlate = null;\nlet currentVehicle = \"car\";\nlet pendingSlot = null;\n\n\n/* ===================== DATA ===================== */\nconst vehicleImages = {\n    car: \"assets/vehicles/car.jpg\",\n    motorbike: \"assets/vehicles/motorbike.jpg\",\n    bike: \"assets/vehicles/bike.jpg\"\n};\n\n/* ===================== VEHICLE SELECT ===================== */\ndocument.querySelectorAll(\".vehicle-option\").forEach(opt => {\n    opt.onclick = () => {\n        document\n            .querySelectorAll(\".vehicle-option\")\n            .forEach(o => o.classList.remove(\"active\"));\n\n        opt.classList.add(\"active\");\n        currentVehicle = opt.dataset.type;\n    };\n});\n\n/* ===================== ZONE ===================== */\nfunction renderZoneButtons() {\n    zoneSelector.innerHTML = \"\";\n\n    Object.keys(zones).forEach(zoneKey => {\n        const btn = document.createElement(\"button\");\n        btn.className = \"zone-btn\";\n        btn.textContent = zones[zoneKey].name;\n\n        if (zoneKey === currentZone) btn.classList.add(\"active\");\n\n        btn.onclick = () => {\n            currentZone = zoneKey;\n            renderZoneButtons();\n            renderSlots();\n        };\n\n        zoneSelector.appendChild(btn);\n    });\n}\n\nfunction updateZoneInfo() {\n    const slots = zones[currentZone].slots;\n    let free = 0, busy = 0;\n\n    slots.forEach(s => s.occupied ? busy++ : free++);\n\n    freeCountEl.textContent = free;\n    busyCountEl.textContent = busy;\n}\n\n/* ===================== PARKING GRID ===================== */\nfunction renderSlots() {\n    grid.innerHTML = \"\";\n    const slots = zones[currentZone].slots;\n\n    slots.forEach(slot => {\n        const div = document.createElement(\"div\");\n        div.className = \"slot \" + (slot.occupied ? \"busy\" : \"free\");\n        div.textContent = `Slot ${slot.id}`;\n        div.onclick = () => handleSlotClick(slot);\n        grid.appendChild(div);\n    });\n\n    updateZoneInfo();\n}\n\n/* ===================== SLOT CLICK ===================== */\n// \n\nfunction handleSlotClick(slot) {\n\n    /* ===== CLICK SLOT ÄÃƒ CÃ“ XE ===== */\n    if (slot.occupied) {\n\n        activeSlot = slot; // set láº¡i slot Ä‘ang thao tÃ¡c\n        pendingSlot = slot;\n\n        document.getElementById(\"confirmModal\").style.display = \"flex\";\n        return;\n    }\n\n    /* ===== Äá»– XE Má»šI ===== */\n    if (!detectedPlate) {\n        alert(\"Please scan license plate first!\");\n        return;\n    }\n\n    const existed = isVehicleAlreadyParked(detectedPlate);\n    if (existed) {\n        alert(`Vehicle already parked!\\nZone: ${existed.zone}\\nSlot: ${existed.slot}`);\n        return;\n    }\n\n    slot.occupied = true;\n    slot.startTime = Date.now();\n    slot.vehicle = currentVehicle;\n    slot.plate = detectedPlate;\n    activeSlot = slot;\n\n    vehicleInfo.textContent = `Vehicle: ${currentVehicle}`;\n    plateInfo.textContent = `Plate: ${detectedPlate}`;\n    statusText.textContent =\n        `Parking at ${zones[currentZone].name} - Slot ${slot.id}`;\n\n    vehicleImageEl.src = vehicleImages[currentVehicle];\n    vehicleImageEl.style.display = \"block\";\n\n    startTimer();\n\n    /* ðŸ”¥ CLEAR BIá»‚N Sá» Äá»‚ QUÃ‰T XE KHÃC */\n    detectedPlate = null;\n    document.getElementById(\"plateText\").textContent = \"â€”\";\n\n    renderSlots();\n}\n\n\nfunction isVehicleAlreadyParked(plate) {\n    for (const zoneKey in zones) {\n        const slots = zones[zoneKey].slots;\n        for (const slot of slots) {\n            if (slot.occupied && slot.plate === plate) {\n                return {\n                    zone: zones[zoneKey].name,\n                    slot: slot.id\n                };\n            }\n        }\n    }\n    return null;\n}\n\n/* ===================== ZONE DROPDOWN ===================== */\nselected.onclick = () => customSelect.classList.toggle(\"open\");\n\noptions.forEach(option => {\n    option.onclick = () => {\n        currentZone = option.dataset.zone;\n        selected.innerHTML = option.textContent + '<span class=\"arrow\">â–¾</span>';\n        customSelect.classList.remove(\"open\");\n\n        stopTimer();\n        renderZoneButtons();\n        renderSlots();\n    };\n});\n\ndocument.addEventListener(\"click\", e => {\n    if (!customSelect.contains(e.target)) {\n        customSelect.classList.remove(\"open\");\n    }\n});\n\n/* ===================== TIMER ===================== */\nfunction startTimer() {\n    clearInterval(timerInterval);\n\n    timerInterval = setInterval(() => {\n        if (!activeSlot) return;\n\n        const diff = Math.floor((Date.now() - activeSlot.startTime) / 1000);\n        const min = String(Math.floor(diff / 60)).padStart(2, \"0\");\n        const sec = String(diff % 60).padStart(2, \"0\");\n\n        timerText.textContent = `Time: ${min}:${sec}`;\n        priceText.textContent =\n            `Price: ${calculatePrice(Math.floor(diff / 60))} VND`;\n    }, 1000);\n}\n\nfunction stopTimer() {\n    clearInterval(timerInterval);\n    timerText.textContent = \"Time: 00:00\";\n    priceText.textContent = \"Price: 0 VND\";\n}\n\n/* ===================== CAMERA / SCAN ===================== */\ndocument.getElementById(\"parkBtn\").onclick = () => openCamera();\n\nfunction openCamera() {\n    detectedPlate = generatePlate();\n    document.getElementById(\"cameraModal\").style.display = \"flex\";\n}\n\nfunction generatePlate() {\n    const letters = \"ABCDEFGH\";\n    const nums = Math.floor(1000 + Math.random() * 9000);\n    return `51${letters[Math.floor(Math.random() * letters.length)]}-${nums}`;\n}\n\nfunction confirmPlate() {\n    document.getElementById(\"cameraModal\").style.display = \"none\";\n    document.getElementById(\"plateText\").textContent = detectedPlate;\n}\n\n/* ===================== QR BILL ===================== */\nfunction showQRBill(data) {\n    const modal = document.getElementById(\"qrModal\");\n    const qrDiv = document.getElementById(\"qrCode\");\n    const info = document.getElementById(\"billInfo\");\n\n    qrDiv.innerHTML = \"\";\n\n    const billText = `\n    Zone: ${data.zone}\n    Slot: ${data.slot}\n    Vehicle: ${data.vehicle}\n    Plate: ${data.plate}\n    Time: ${data.time} minutes\n    Price: ${data.price} VND\n    `;\n\n    new QRCode(qrDiv, {\n        text: billText,\n        width: 160,\n        height: 160\n    });\n\n    info.innerText = billText;\n    modal.style.display = \"flex\";\n}\n\ndocument.getElementById(\"continueBtn\").onclick = () => {\n    document.getElementById(\"confirmModal\").style.display = \"none\";\n    pendingSlot = null;\n};\n\ndocument.getElementById(\"leaveBtn\").onclick = () => {\n    document.getElementById(\"confirmModal\").style.display = \"none\";\n\n    if (!pendingSlot) return;\n\n    const minutes = Math.floor((Date.now() - pendingSlot.startTime) / 60000);\n    const price = calculatePrice(minutes);\n\n    showQRBill({\n        zone: zones[currentZone].name,\n        slot: pendingSlot.id,\n        vehicle: pendingSlot.vehicle,\n        plate: pendingSlot.plate,\n        time: minutes,\n        price\n    });\n\n    stopTimer();\n\n    pendingSlot.occupied = false;\n    pendingSlot.startTime = null;\n    pendingSlot.vehicle = null;\n    pendingSlot.plate = null;\n\n    activeSlot = null;\n    pendingSlot = null;\n\n    vehicleInfo.textContent = \"Vehicle: â€”\";\n    plateInfo.textContent = \"Plate: â€”\";\n    statusText.textContent = \"Select a slot\";\n    vehicleImageEl.style.display = \"none\";\n\n    renderSlots();\n};\n\n\nfunction closeQR() {\n    document.getElementById(\"qrModal\").style.display = \"none\";\n}\n\n/* ===================== INIT ===================== */\nrenderZoneButtons();\nrenderSlots();\n\n"],"file":"parking.dev.js"}