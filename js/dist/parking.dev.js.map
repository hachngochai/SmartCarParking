{"version":3,"sources":["parking.js"],"names":["grid","document","getElementById","customSelect","selected","querySelector","options","querySelectorAll","vehicleInfo","plateInfo","statusText","timerText","priceText","zoneSelector","freeCountEl","busyCountEl","vehicleImageEl","currentZone","activeSlot","timerInterval","detectedPlate","currentVehicle","vehicleImages","car","motorbike","bike","forEach","opt","onclick","o","classList","remove","add","dataset","type","showNotification","message","notif","textContent","style","display","closeNotification","renderZoneButtons","innerHTML","Object","keys","zones","zoneKey","btn","createElement","className","name","renderSlots","appendChild","updateZoneInfo","slots","free","busy","s","occupied","slot","div","id","handleSlotClick","existed","isVehicleAlreadyParked","zone","startTime","Date","now","vehicle","plate","src","startTimer","minutes","Math","floor","price","calculatePrice","showQRBill","time","stopTimer","toggle","option","addEventListener","e","contains","target","clearInterval","setInterval","diff","min","String","padStart","sec","openCamera","generatePlate","letters","nums","random","length","confirmPlate","data","modal","qrDiv","info","billText","QRCode","text","width","height","innerText","closeQR"],"mappings":";;AAAA;AACA,IAAMA,IAAI,GAAGC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAAb;AACA,IAAMC,YAAY,GAAGF,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAArB;AACA,IAAME,QAAQ,GAAGD,YAAY,CAACE,aAAb,CAA2B,WAA3B,CAAjB;AACA,IAAMC,OAAO,GAAGH,YAAY,CAACI,gBAAb,CAA8B,aAA9B,CAAhB;AAEA,IAAMC,WAAW,GAAGP,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAApB;AACA,IAAMO,SAAS,GAAGR,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAlB;AACA,IAAMQ,UAAU,GAAGT,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAnB;AACA,IAAMS,SAAS,GAAGV,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAlB;AACA,IAAMU,SAAS,GAAGX,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAlB;AAEA,IAAMW,YAAY,GAAGZ,QAAQ,CAACC,cAAT,CAAwB,cAAxB,CAArB;AACA,IAAMY,WAAW,GAAGb,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAApB;AACA,IAAMa,WAAW,GAAGd,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAApB;AAEA,IAAMc,cAAc,GAAGf,QAAQ,CAACC,cAAT,CAAwB,cAAxB,CAAvB;AAEA;;AACA,IAAIe,WAAW,GAAG,GAAlB;AACA,IAAIC,UAAU,GAAG,IAAjB;AACA,IAAIC,aAAa,GAAG,IAApB;AACA,IAAIC,aAAa,GAAG,IAApB;AACA,IAAIC,cAAc,GAAG,KAArB;AAEA;;AACA,IAAMC,aAAa,GAAG;AAClBC,EAAAA,GAAG,EAAE,yBADa;AAElBC,EAAAA,SAAS,EAAE,+BAFO;AAGlBC,EAAAA,IAAI,EAAE;AAHY,CAAtB;AAMA;;AACAxB,QAAQ,CAACM,gBAAT,CAA0B,iBAA1B,EAA6CmB,OAA7C,CAAqD,UAAAC,GAAG,EAAI;AACxDA,EAAAA,GAAG,CAACC,OAAJ,GAAc,YAAM;AAChB3B,IAAAA,QAAQ,CACHM,gBADL,CACsB,iBADtB,EAEKmB,OAFL,CAEa,UAAAG,CAAC;AAAA,aAAIA,CAAC,CAACC,SAAF,CAAYC,MAAZ,CAAmB,QAAnB,CAAJ;AAAA,KAFd;AAIAJ,IAAAA,GAAG,CAACG,SAAJ,CAAcE,GAAd,CAAkB,QAAlB;AACAX,IAAAA,cAAc,GAAGM,GAAG,CAACM,OAAJ,CAAYC,IAA7B;AACH,GAPD;AAQH,CATD;;AAWA,SAASC,gBAAT,CAA0BC,OAA1B,EAAmC;AAC/B,MAAMC,KAAK,GAAGpC,QAAQ,CAACC,cAAT,CAAwB,oBAAxB,CAAd;AACAD,EAAAA,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCoC,WAAxC,GAAsDF,OAAtD;AACAC,EAAAA,KAAK,CAACE,KAAN,CAAYC,OAAZ,GAAsB,OAAtB;AACH;;AAED,SAASC,iBAAT,GAA6B;AACzBxC,EAAAA,QAAQ,CAACC,cAAT,CAAwB,oBAAxB,EAA8CqC,KAA9C,CAAoDC,OAApD,GAA8D,MAA9D;AACH;AAED;;;AACA,SAASE,iBAAT,GAA6B;AACzB7B,EAAAA,YAAY,CAAC8B,SAAb,GAAyB,EAAzB;AAEAC,EAAAA,MAAM,CAACC,IAAP,CAAYC,KAAZ,EAAmBpB,OAAnB,CAA2B,UAAAqB,OAAO,EAAI;AAClC,QAAMC,GAAG,GAAG/C,QAAQ,CAACgD,aAAT,CAAuB,QAAvB,CAAZ;AACAD,IAAAA,GAAG,CAACE,SAAJ,GAAgB,UAAhB;AACAF,IAAAA,GAAG,CAACV,WAAJ,GAAkBQ,KAAK,CAACC,OAAD,CAAL,CAAeI,IAAjC;AAEA,QAAIJ,OAAO,KAAK9B,WAAhB,EAA6B+B,GAAG,CAAClB,SAAJ,CAAcE,GAAd,CAAkB,QAAlB;;AAE7BgB,IAAAA,GAAG,CAACpB,OAAJ,GAAc,YAAM;AAChBX,MAAAA,WAAW,GAAG8B,OAAd;AACAL,MAAAA,iBAAiB;AACjBU,MAAAA,WAAW;AACd,KAJD;;AAMAvC,IAAAA,YAAY,CAACwC,WAAb,CAAyBL,GAAzB;AACH,GAdD;AAeH;;AAED,SAASM,cAAT,GAA0B;AACtB,MAAMC,KAAK,GAAGT,KAAK,CAAC7B,WAAD,CAAL,CAAmBsC,KAAjC;AACA,MAAIC,IAAI,GAAG,CAAX;AAAA,MAAcC,IAAI,GAAG,CAArB;AAEAF,EAAAA,KAAK,CAAC7B,OAAN,CAAc,UAAAgC,CAAC;AAAA,WAAIA,CAAC,CAACC,QAAF,GAAaF,IAAI,EAAjB,GAAsBD,IAAI,EAA9B;AAAA,GAAf;AAEA1C,EAAAA,WAAW,CAACwB,WAAZ,GAA0BkB,IAA1B;AACAzC,EAAAA,WAAW,CAACuB,WAAZ,GAA0BmB,IAA1B;AACH;AAED;;;AACA,SAASL,WAAT,GAAuB;AACnBpD,EAAAA,IAAI,CAAC2C,SAAL,GAAiB,EAAjB;AACA,MAAMY,KAAK,GAAGT,KAAK,CAAC7B,WAAD,CAAL,CAAmBsC,KAAjC;AAEAA,EAAAA,KAAK,CAAC7B,OAAN,CAAc,UAAAkC,IAAI,EAAI;AAClB,QAAMC,GAAG,GAAG5D,QAAQ,CAACgD,aAAT,CAAuB,KAAvB,CAAZ;AACAY,IAAAA,GAAG,CAACX,SAAJ,GAAgB,WAAWU,IAAI,CAACD,QAAL,GAAgB,MAAhB,GAAyB,MAApC,CAAhB;AACAE,IAAAA,GAAG,CAACvB,WAAJ,kBAA0BsB,IAAI,CAACE,EAA/B;;AACAD,IAAAA,GAAG,CAACjC,OAAJ,GAAc;AAAA,aAAMmC,eAAe,CAACH,IAAD,CAArB;AAAA,KAAd;;AACA5D,IAAAA,IAAI,CAACqD,WAAL,CAAiBQ,GAAjB;AACH,GAND;AAQAP,EAAAA,cAAc;AACjB;AAED;;;AACA,SAASS,eAAT,CAAyBH,IAAzB,EAA+B;AAE3B;AACA;AACA;AACA;AACA,MAAI,CAACxC,aAAL,EAAoB;AACbe,IAAAA,gBAAgB,CAAC,kCAAD,CAAhB;AACC;AACP;;AAED,MAAM6B,OAAO,GAAGC,sBAAsB,CAAC7C,aAAD,CAAtC;;AACA,MAAI4C,OAAJ,EAAa;AACV7B,IAAAA,gBAAgB,0CAAmC6B,OAAO,CAACE,IAA3C,qBAA0DF,OAAO,CAACJ,IAAlE,EAAhB;AACC;AACH;;AAED,MAAI,CAACA,IAAI,CAACD,QAAV,EAAoB;AAEhBC,IAAAA,IAAI,CAACD,QAAL,GAAgB,IAAhB;AACAC,IAAAA,IAAI,CAACO,SAAL,GAAiBC,IAAI,CAACC,GAAL,EAAjB;AACAT,IAAAA,IAAI,CAACU,OAAL,GAAejD,cAAf;AACAuC,IAAAA,IAAI,CAACW,KAAL,GAAanD,aAAb;AACAF,IAAAA,UAAU,GAAG0C,IAAb;AAEApD,IAAAA,WAAW,CAAC8B,WAAZ,sBAAsCjB,cAAtC;AACAZ,IAAAA,SAAS,CAAC6B,WAAV,oBAAkClB,aAAlC;AACAV,IAAAA,UAAU,CAAC4B,WAAX,wBACkBQ,KAAK,CAAC7B,WAAD,CAAL,CAAmBkC,IADrC,qBACoDS,IAAI,CAACE,EADzD;AAGA9C,IAAAA,cAAc,CAACwD,GAAf,GAAqBlD,aAAa,CAACD,cAAD,CAAlC;AACAL,IAAAA,cAAc,CAACuB,KAAf,CAAqBC,OAArB,GAA+B,OAA/B;;AACA,QAAMwB,QAAO,GAAGC,sBAAsB,CAAC7C,aAAD,CAAtC;;AAGAqD,IAAAA,UAAU;AACb,GAnBD,MAmBO;AACH,QAAMC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAW,CAACR,IAAI,CAACC,GAAL,KAAaT,IAAI,CAACO,SAAnB,IAAgC,KAA3C,CAAhB;AACA,QAAMU,KAAK,GAAGC,cAAc,CAACJ,OAAD,CAA5B;AAEAK,IAAAA,UAAU,CAAC;AACPb,MAAAA,IAAI,EAAEpB,KAAK,CAAC7B,WAAD,CAAL,CAAmBkC,IADlB;AAEPS,MAAAA,IAAI,EAAEA,IAAI,CAACE,EAFJ;AAGPQ,MAAAA,OAAO,EAAEV,IAAI,CAACU,OAHP;AAIPC,MAAAA,KAAK,EAAEX,IAAI,CAACW,KAJL;AAKPS,MAAAA,IAAI,EAAEN,OALC;AAMPG,MAAAA,KAAK,EAALA;AANO,KAAD,CAAV;AASAI,IAAAA,SAAS;AAETrB,IAAAA,IAAI,CAACD,QAAL,GAAgB,KAAhB;AACAC,IAAAA,IAAI,CAACO,SAAL,GAAiB,IAAjB;AACAP,IAAAA,IAAI,CAACU,OAAL,GAAe,IAAf;AACAV,IAAAA,IAAI,CAACW,KAAL,GAAa,IAAb;AAEAnD,IAAAA,aAAa,GAAG,IAAhB;AAEAZ,IAAAA,WAAW,CAAC8B,WAAZ,GAA0B,YAA1B;AACA7B,IAAAA,SAAS,CAAC6B,WAAV,GAAwB,UAAxB;AACA5B,IAAAA,UAAU,CAAC4B,WAAX,GAAyB,eAAzB;AACAtB,IAAAA,cAAc,CAACuB,KAAf,CAAqBC,OAArB,GAA+B,MAA/B;AACAvC,IAAAA,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCoC,WAArC,GAAmD,GAAnD;AACH;;AAEDc,EAAAA,WAAW;AACd;;AAED,SAASa,sBAAT,CAAgCM,KAAhC,EAAuC;AACnC,OAAK,IAAMxB,OAAX,IAAsBD,KAAtB,EAA6B;AACzB,QAAMS,KAAK,GAAGT,KAAK,CAACC,OAAD,CAAL,CAAeQ,KAA7B;AADyB;AAAA;AAAA;;AAAA;AAEzB,2BAAmBA,KAAnB,8HAA0B;AAAA,YAAfK,IAAe;;AACtB,YAAIA,IAAI,CAACD,QAAL,IAAiBC,IAAI,CAACW,KAAL,KAAeA,KAApC,EAA2C;AACvC,iBAAO;AACHL,YAAAA,IAAI,EAAEpB,KAAK,CAACC,OAAD,CAAL,CAAeI,IADlB;AAEHS,YAAAA,IAAI,EAAEA,IAAI,CAACE;AAFR,WAAP;AAIH;AACJ;AATwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAU5B;;AACD,SAAO,IAAP;AACH;AAED;;;AACA1D,QAAQ,CAACwB,OAAT,GAAmB;AAAA,SAAMzB,YAAY,CAAC2B,SAAb,CAAuBoD,MAAvB,CAA8B,MAA9B,CAAN;AAAA,CAAnB;;AAEA5E,OAAO,CAACoB,OAAR,CAAgB,UAAAyD,MAAM,EAAI;AACtBA,EAAAA,MAAM,CAACvD,OAAP,GAAiB,YAAM;AACnBX,IAAAA,WAAW,GAAGkE,MAAM,CAAClD,OAAP,CAAeiC,IAA7B;AACA9D,IAAAA,QAAQ,CAACuC,SAAT,GAAqBwC,MAAM,CAAC7C,WAAP,GAAqB,8BAA1C;AACAnC,IAAAA,YAAY,CAAC2B,SAAb,CAAuBC,MAAvB,CAA8B,MAA9B;AAEAkD,IAAAA,SAAS;AACTvC,IAAAA,iBAAiB;AACjBU,IAAAA,WAAW;AACd,GARD;AASH,CAVD;AAYAnD,QAAQ,CAACmF,gBAAT,CAA0B,OAA1B,EAAmC,UAAAC,CAAC,EAAI;AACpC,MAAI,CAAClF,YAAY,CAACmF,QAAb,CAAsBD,CAAC,CAACE,MAAxB,CAAL,EAAsC;AAClCpF,IAAAA,YAAY,CAAC2B,SAAb,CAAuBC,MAAvB,CAA8B,MAA9B;AACH;AACJ,CAJD;AAMA;;AACA,SAAS0C,UAAT,GAAsB;AAClBe,EAAAA,aAAa,CAACrE,aAAD,CAAb;AAEAA,EAAAA,aAAa,GAAGsE,WAAW,CAAC,YAAM;AAC9B,QAAI,CAACvE,UAAL,EAAiB;AAEjB,QAAMwE,IAAI,GAAGf,IAAI,CAACC,KAAL,CAAW,CAACR,IAAI,CAACC,GAAL,KAAanD,UAAU,CAACiD,SAAzB,IAAsC,IAAjD,CAAb;AACA,QAAMwB,GAAG,GAAGC,MAAM,CAACjB,IAAI,CAACC,KAAL,CAAWc,IAAI,GAAG,EAAlB,CAAD,CAAN,CAA8BG,QAA9B,CAAuC,CAAvC,EAA0C,GAA1C,CAAZ;AACA,QAAMC,GAAG,GAAGF,MAAM,CAACF,IAAI,GAAG,EAAR,CAAN,CAAkBG,QAAlB,CAA2B,CAA3B,EAA8B,GAA9B,CAAZ;AAEAlF,IAAAA,SAAS,CAAC2B,WAAV,mBAAiCqD,GAAjC,cAAwCG,GAAxC;AACAlF,IAAAA,SAAS,CAAC0B,WAAV,oBACcwC,cAAc,CAACH,IAAI,CAACC,KAAL,CAAWc,IAAI,GAAG,EAAlB,CAAD,CAD5B;AAEH,GAV0B,EAUxB,IAVwB,CAA3B;AAWH;;AAED,SAAST,SAAT,GAAqB;AACjBO,EAAAA,aAAa,CAACrE,aAAD,CAAb;AACAR,EAAAA,SAAS,CAAC2B,WAAV,GAAwB,aAAxB;AACA1B,EAAAA,SAAS,CAAC0B,WAAV,GAAwB,cAAxB;AACH;AAED;;;AACArC,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmC0B,OAAnC,GAA6C;AAAA,SAAMmE,UAAU,EAAhB;AAAA,CAA7C;;AAEA,SAASA,UAAT,GAAsB;AAClB3E,EAAAA,aAAa,GAAG4E,aAAa,EAA7B;AACA/F,EAAAA,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCqC,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AACH;;AAED,SAASwD,aAAT,GAAyB;AACrB,MAAMC,OAAO,GAAG,UAAhB;AACA,MAAMC,IAAI,GAAGvB,IAAI,CAACC,KAAL,CAAW,OAAOD,IAAI,CAACwB,MAAL,KAAgB,IAAlC,CAAb;AACA,qBAAYF,OAAO,CAACtB,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACwB,MAAL,KAAgBF,OAAO,CAACG,MAAnC,CAAD,CAAnB,cAAmEF,IAAnE;AACH;;AAED,SAASG,YAAT,GAAwB;AACpBpG,EAAAA,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCqC,KAAvC,CAA6CC,OAA7C,GAAuD,MAAvD;AACAvC,EAAAA,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCoC,WAArC,GAAmDlB,aAAnD;AACH;AAED;;;AACA,SAAS2D,UAAT,CAAoBuB,IAApB,EAA0B;AACtB,MAAMC,KAAK,GAAGtG,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAd;AACA,MAAMsG,KAAK,GAAGvG,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAd;AACA,MAAMuG,IAAI,GAAGxG,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAb;AAEAsG,EAAAA,KAAK,CAAC7D,SAAN,GAAkB,EAAlB;AAEA,MAAM+D,QAAQ,qBACVJ,IAAI,CAACpC,IADK,qBAEVoC,IAAI,CAAC1C,IAFK,wBAGP0C,IAAI,CAAChC,OAHE,sBAITgC,IAAI,CAAC/B,KAJI,qBAKV+B,IAAI,CAACtB,IALK,8BAMTsB,IAAI,CAACzB,KANI,WAAd;AASA,MAAI8B,MAAJ,CAAWH,KAAX,EAAkB;AACdI,IAAAA,IAAI,EAAEF,QADQ;AAEdG,IAAAA,KAAK,EAAE,GAFO;AAGdC,IAAAA,MAAM,EAAE;AAHM,GAAlB;AAMAL,EAAAA,IAAI,CAACM,SAAL,GAAiBL,QAAjB;AACAH,EAAAA,KAAK,CAAChE,KAAN,CAAYC,OAAZ,GAAsB,MAAtB;AACH;;AAED,SAASwE,OAAT,GAAmB;AACf/G,EAAAA,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCqC,KAAnC,CAAyCC,OAAzC,GAAmD,MAAnD;AACH;AAED;;;AACAE,iBAAiB;AACjBU,WAAW","sourcesContent":["/* ===================== DOM ===================== */\nconst grid = document.getElementById(\"parkingGrid\");\nconst customSelect = document.getElementById(\"zoneSelect\");\nconst selected = customSelect.querySelector(\".selected\");\nconst options = customSelect.querySelectorAll(\".options li\");\n\nconst vehicleInfo = document.getElementById(\"vehicleInfo\");\nconst plateInfo = document.getElementById(\"plateInfo\");\nconst statusText = document.getElementById(\"status\");\nconst timerText = document.getElementById(\"timer\");\nconst priceText = document.getElementById(\"price\");\n\nconst zoneSelector = document.getElementById(\"zoneSelector\");\nconst freeCountEl = document.getElementById(\"freeCount\");\nconst busyCountEl = document.getElementById(\"busyCount\");\n\nconst vehicleImageEl = document.getElementById(\"vehicleImage\");\n\n/* ===================== STATE ===================== */\nlet currentZone = \"A\";\nlet activeSlot = null;\nlet timerInterval = null;\nlet detectedPlate = null;\nlet currentVehicle = \"car\";\n\n/* ===================== DATA ===================== */\nconst vehicleImages = {\n    car: \"assets/vehicles/car.png\",\n    motorbike: \"assets/vehicles/motorbike.png\",\n    bike: \"assets/vehicles/bike.png\"\n};\n\n/* ===================== VEHICLE SELECT ===================== */\ndocument.querySelectorAll(\".vehicle-option\").forEach(opt => {\n    opt.onclick = () => {\n        document\n            .querySelectorAll(\".vehicle-option\")\n            .forEach(o => o.classList.remove(\"active\"));\n\n        opt.classList.add(\"active\");\n        currentVehicle = opt.dataset.type;\n    };\n});\n\nfunction showNotification(message) {\n    const notif = document.getElementById(\"systemNotification\");\n    document.getElementById(\"notifMessage\").textContent = message;\n    notif.style.display = \"block\";\n}\n\nfunction closeNotification() {\n    document.getElementById(\"systemNotification\").style.display = \"none\";\n}\n\n/* ===================== ZONE ===================== */\nfunction renderZoneButtons() {\n    zoneSelector.innerHTML = \"\";\n\n    Object.keys(zones).forEach(zoneKey => {\n        const btn = document.createElement(\"button\");\n        btn.className = \"zone-btn\";\n        btn.textContent = zones[zoneKey].name;\n\n        if (zoneKey === currentZone) btn.classList.add(\"active\");\n\n        btn.onclick = () => {\n            currentZone = zoneKey;\n            renderZoneButtons();\n            renderSlots();\n        };\n\n        zoneSelector.appendChild(btn);\n    });\n}\n\nfunction updateZoneInfo() {\n    const slots = zones[currentZone].slots;\n    let free = 0, busy = 0;\n\n    slots.forEach(s => s.occupied ? busy++ : free++);\n\n    freeCountEl.textContent = free;\n    busyCountEl.textContent = busy;\n}\n\n/* ===================== PARKING GRID ===================== */\nfunction renderSlots() {\n    grid.innerHTML = \"\";\n    const slots = zones[currentZone].slots;\n\n    slots.forEach(slot => {\n        const div = document.createElement(\"div\");\n        div.className = \"slot \" + (slot.occupied ? \"busy\" : \"free\");\n        div.textContent = `Slot ${slot.id}`;\n        div.onclick = () => handleSlotClick(slot);\n        grid.appendChild(div);\n    });\n\n    updateZoneInfo();\n}\n\n/* ===================== SLOT CLICK ===================== */\nfunction handleSlotClick(slot) {\n\n    // if (!slot.occupied && !detectedPlate) {\n    //     alert(\"Please scan license plate first!\");\n    //     return;\n    // }\n    if (!detectedPlate) {\n           showNotification(\"Please scan vehicle plate first!\");\n            return;\n    }\n\n    const existed = isVehicleAlreadyParked(detectedPlate);\n    if (existed) {\n       showNotification(`Vehicle already parked!\\nZone: ${existed.zone}\\nSlot: ${existed.slot}`);\n        return;\n    }\n\n    if (!slot.occupied) {\n        \n        slot.occupied = true;\n        slot.startTime = Date.now();\n        slot.vehicle = currentVehicle;\n        slot.plate = detectedPlate;\n        activeSlot = slot;\n\n        vehicleInfo.textContent = `Vehicle: ${currentVehicle}`;\n        plateInfo.textContent = `Plate: ${detectedPlate}`;\n        statusText.textContent =\n            `Parking at ${zones[currentZone].name} - Slot ${slot.id}`;\n\n        vehicleImageEl.src = vehicleImages[currentVehicle];\n        vehicleImageEl.style.display = \"block\";\n        const existed = isVehicleAlreadyParked(detectedPlate);\n      \n\n        startTimer();\n    } else {\n        const minutes = Math.floor((Date.now() - slot.startTime) / 60000);\n        const price = calculatePrice(minutes);\n\n        showQRBill({\n            zone: zones[currentZone].name,\n            slot: slot.id,\n            vehicle: slot.vehicle,\n            plate: slot.plate,\n            time: minutes,\n            price\n        });\n\n        stopTimer();\n\n        slot.occupied = false;\n        slot.startTime = null;\n        slot.vehicle = null;\n        slot.plate = null;\n\n        detectedPlate = null;\n\n        vehicleInfo.textContent = \"Vehicle: —\";\n        plateInfo.textContent = \"Plate: —\";\n        statusText.textContent = \"Select a slot\";\n        vehicleImageEl.style.display = \"none\";\n        document.getElementById(\"plateText\").textContent = \"—\";\n    }\n\n    renderSlots();\n}\n\nfunction isVehicleAlreadyParked(plate) {\n    for (const zoneKey in zones) {\n        const slots = zones[zoneKey].slots;\n        for (const slot of slots) {\n            if (slot.occupied && slot.plate === plate) {\n                return {\n                    zone: zones[zoneKey].name,\n                    slot: slot.id\n                };\n            }\n        }\n    }\n    return null;\n}\n\n/* ===================== ZONE DROPDOWN ===================== */\nselected.onclick = () => customSelect.classList.toggle(\"open\");\n\noptions.forEach(option => {\n    option.onclick = () => {\n        currentZone = option.dataset.zone;\n        selected.innerHTML = option.textContent + '<span class=\"arrow\">▾</span>';\n        customSelect.classList.remove(\"open\");\n\n        stopTimer();\n        renderZoneButtons();\n        renderSlots();\n    };\n});\n\ndocument.addEventListener(\"click\", e => {\n    if (!customSelect.contains(e.target)) {\n        customSelect.classList.remove(\"open\");\n    }\n});\n\n/* ===================== TIMER ===================== */\nfunction startTimer() {\n    clearInterval(timerInterval);\n\n    timerInterval = setInterval(() => {\n        if (!activeSlot) return;\n\n        const diff = Math.floor((Date.now() - activeSlot.startTime) / 1000);\n        const min = String(Math.floor(diff / 60)).padStart(2, \"0\");\n        const sec = String(diff % 60).padStart(2, \"0\");\n\n        timerText.textContent = `Time: ${min}:${sec}`;\n        priceText.textContent =\n            `Price: ${calculatePrice(Math.floor(diff / 60))} VND`;\n    }, 1000);\n}\n\nfunction stopTimer() {\n    clearInterval(timerInterval);\n    timerText.textContent = \"Time: 00:00\";\n    priceText.textContent = \"Price: 0 VND\";\n}\n\n/* ===================== CAMERA / SCAN ===================== */\ndocument.getElementById(\"parkBtn\").onclick = () => openCamera();\n\nfunction openCamera() {\n    detectedPlate = generatePlate();\n    document.getElementById(\"cameraModal\").style.display = \"flex\";\n}\n\nfunction generatePlate() {\n    const letters = \"ABCDEFGH\";\n    const nums = Math.floor(1000 + Math.random() * 9000);\n    return `51${letters[Math.floor(Math.random() * letters.length)]}-${nums}`;\n}\n\nfunction confirmPlate() {\n    document.getElementById(\"cameraModal\").style.display = \"none\";\n    document.getElementById(\"plateText\").textContent = detectedPlate;\n}\n\n/* ===================== QR BILL ===================== */\nfunction showQRBill(data) {\n    const modal = document.getElementById(\"qrModal\");\n    const qrDiv = document.getElementById(\"qrCode\");\n    const info = document.getElementById(\"billInfo\");\n\n    qrDiv.innerHTML = \"\";\n\n    const billText = `\nZone: ${data.zone}\nSlot: ${data.slot}\nVehicle: ${data.vehicle}\nPlate: ${data.plate}\nTime: ${data.time} minutes\nPrice: ${data.price} VND\n`;\n\n    new QRCode(qrDiv, {\n        text: billText,\n        width: 160,\n        height: 160\n    });\n\n    info.innerText = billText;\n    modal.style.display = \"flex\";\n}\n\nfunction closeQR() {\n    document.getElementById(\"qrModal\").style.display = \"none\";\n}\n\n/* ===================== INIT ===================== */\nrenderZoneButtons();\nrenderSlots();\n\n"],"file":"parking.dev.js"}